(window.odspNextWebpackJsonp=window.odspNextWebpackJsonp||[]).push([["271"],{"1275":function(e,t,n){"use strict";n.d(t,"t",function(){return r});n.d(t,"e",function(){return i});n.d(t,"n",function(){return s});var r,i,s;(function(e){e[e.WebhookSubscription=0]="WebhookSubscription";e[e.Meta=1]="Meta";e[e.EventHub=2]="EventHub"})(r||(r={}));(function(e){e[e.DriveStatusChange=0]="DriveStatusChange";e[e.QuotaAllowanceChange=1]="QuotaAllowanceChange";e[e.QuotaStateChange=2]="QuotaStateChange";e[e.Zip=3]="Zip";e[e.ProfileChange=4]="ProfileChange"})(i||(i={}));(function(e){e[e.PushChannelProvider=0]="PushChannelProvider";e[e.ItemAutoRefreshProvider=1]="ItemAutoRefreshProvider";e[e.ItemAutoRefreshDataSource=2]="ItemAutoRefreshDataSource"})(s||(s={}))},"2569":function(e,t,n){"use strict";n.r(t);n.d(t,"resourceKey",function(){return c});var r=n(0),i=n(7),s=n(5),o=n(1275),u=n(1519),a=n(421),f=n(162),l=(function(e){Object(r.__extends)(t,e);function t(t,n){var r=e.call(this,t,n)||this;r._identityDataSource=n.identityDataSource;r._pushChannelProvider=n.pushChannelProvider;if(r._identityDataSource.getIdentity().type!==f.e.anonymous){r._notificationHandlerDebounce=r.async.debounce(function(){r._handleWebhookSubscriptionMessage()},5e4,{leading:!0,maxWait:5e4});r._pushChannelProvider.setupNotificationHandler({source:o.t.WebhookSubscription,scenarios:[o.e.ProfileChange]},function(){r._notificationHandlerDebounce()})}return r}t.prototype._handleWebhookSubscriptionMessage=function(){this._pushChannelProvider.log(o.n.PushChannelProvider,"handling profile change event");this._identityDataSource.refreshAuthTicket()};t.dependencies=Object(r.__assign)(Object(r.__assign)({},i.n.dependencies),{identityDataSource:a.e,pushChannelProvider:u.e});return t})(i.n);t.default=l;var c=Object(s.s)("ProfileChangeHandler",l,{identityDataSource:a.e,pushChannelProvider:u.e})}}]);