(window.odspNextWebpackJsonp=window.odspNextWebpackJsonp||[]).push([["plt.items-view"],{"32":function(e,t,n){"use strict";n.d(t,"e",function(){return o});n.d(t,"r",function(){return u});n.d(t,"n",function(){return a});n.d(t,"t",function(){return f});var r=n(112),i=Object(r.e)(),s=0,o=(function(){function e(e){this.debugName=e;var t=this.id=f(e);i.set(t,this);var n=JSON.stringify(t);this.pack=new Function("v","return { "+n+": v }");this.unpack=new Function("t","return t["+n+"]")}e.get=function(e){if(!e)throw new Error("Unable to determine the Facet for an empty or undefined id.");var t=i.get(e);if(!t)throw new Error("Unable to determine the Facet for id '"+e+"'. Only store objects into a facet collection that have been created using the pack function. This error will typically occur if multiple versions of the @ms/items-view package have been bundled into the application.");return t};e.prototype.unpack=function(e){throw new Error("Not implemented")};e.prototype.pack=function(e){throw new Error("Not implemented")};return e})();function u(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];n[r]=t[i.id]}return n}function a(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){n[e[r].id]=t[r]}return n}function f(e){return e+"_"+ ++s}},"50":function(e,t,n){"use strict";n.d(t,"s",function(){return a});n.d(t,"t",function(){return f});n.d(t,"i",function(){return l});n.d(t,"r",function(){return c});n.d(t,"n",function(){return h});n.d(t,"o",function(){return p});n.d(t,"e",function(){return v});var r,i=n(0),s=n(32),o=n(112);(function(e){e.string="string";e.number="number";e.boolean="boolean";e.subKey="subKey";e.array="array"})(r||(r={}));var u={};function a(e){void 0===e&&(e=u);var t=e.shouldNormalizeCasing,n=e.shouldNormalizeToEmpty,r=t?m:function(e){return e};return{serialize:n?function(e){return r(e)||""}:r,deserialize:function(e){return e}}}function f(e){return{serialize:function(t){return t?t.map(function(t){return e.serialize(t)}):void 0},deserialize:function(t){return t?t.map(function(t){return e.deserialize(t)}):void 0}}}function l(){return{serialize:function(e){return e},deserialize:function(e){return e}}}function c(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[e[n]]=n);return{serialize:function(t){return e[t]},deserialize:function(e){return t[e]}}}function h(){return{serialize:function(e){return e},deserialize:function(e){return e}}}function p(e){return{serialize:function(t){return t?e.serialize(t):void 0},deserialize:function(t){return t?e.deserialize(t):void 0}}}var d=Object(o.e)(),v=(function(e){Object(i.__extends)(t,e);function t(t,n){var r=this;if(t.indexOf(":")>-1||t.indexOf('"')>-1||t.indexOf(",")>-1)throw new Error("The name assigned to a KeyFacet cannot have a ':', ',' or '\"' character within it.");(r=e.call(this,t)||this)._keyParts=Object.keys(n).map(function(e){var t=n[e];return{jsonKey:JSON.stringify(e),option:t}});var s=JSON.stringify(r.id),o="["+s,u=o.length;r._serializedKeyMap=new WeakMap;d.set(o,r);r.matches=function(e){return!!e&&e.slice(0,u)===o};r.serialize=new Function("v",["var k = this._serializedKeyMap.get(v);","if (k) { return k; }","var p = this._keyParts;","k = JSON.stringify(["+s+r._keyParts.map(function(e,t){return", p["+t+"].option.serialize(v["+e.jsonKey+"])"}).join("")+"]);","this._serializedKeyMap.set(v, k);","return k;"].join(" "));r.deserialize=new Function("k",Object(i.__spreadArrays)(["var a = JSON.parse(k);","if (a[0] !== "+s+') { throw new Error("Input \'" + k + "\' does not match key " + '+s+' + "."); }',"var p = this._keyParts;","var c;","var v = {};"],r._keyParts.map(function(e,t){return"c = p["+t+"].option.deserialize(a["+(t+1)+"]); v["+e.jsonKey+"] = c === null ? undefined : c;"}),["return v;"]).join(" "));return r}t.get=function(e){if(!e)throw new Error("Unable to determine the KeyFacet for an empty or undefined key.");var t=e.indexOf('"',2);if(t<0)throw new Error("Invalid item key passed to [KeyFacet].get(). Make sure all keys used are created using [KeyFacet].serialize().");var n=e.slice(0,t+1),r=d.get(n);if(!r){var i=JSON.parse(n.slice(1));throw new Error("Unable to determine the KeyFacet for a key with prefix '"+i+"'. Only use key values created by invoking [KeyFacet].serialize(___) when storing or fetching items in the Item Cache. This error will typically occur if multiple versions of the @ms/items-view package have been bundled into the application.")}return r};t.prototype.matches=function(e){throw new Error("Not implemented")};t.prototype.serialize=function(e){this._serializedKeyMap;throw new Error("Not implemented")};t.prototype.deserialize=function(e){throw new Error("Not implemented")};return t})(s.e);function m(e){return e?(""+e).toUpperCase():e}},"69":function(e,t,n){"use strict";n.d(t,"e",function(){return u});n.d(t,"t",function(){return a});n.d(t,"r",function(){return f});n.d(t,"n",function(){return l});var r=n(50),i=n(176),s=n(32),o=new r.e("keyFacet",{keyFacetId:Object(r.s)()}),u=Object(i.e)(function(e){return o.serialize({keyFacetId:e.id})});function a(e){return o.matches(e)}var f=new s.e("preferredKeyFacet"),l=new s.e("operationHandlerConfiguration")},"71":function(e,t,n){"use strict";n.d(t,"n",function(){return i});n.d(t,"e",function(){return s});n.d(t,"t",function(){return o});var r=n(32),i=new r.e("supportedFacets"),s=new r.e("controlHandlers"),o=(new r.e("operationQueueOperations"),new r.e("operationQueueHandler"),new r.e("registeredOperationHandlers"))},"86":function(e,t,n){"use strict";n.d(t,"e",function(){return s});n.d(t,"n",function(){return o});n.d(t,"t",function(){return u});n.d(t,"r",function(){return a});var r,i=n(32),s=new i.e("error");(function(e){e.unresolved="";e.resolved="resolved";e.failed="failed";e.unsupported="unsupported"})(r||(r={}));function o(e){return!e}function u(e){return!!e}var a=new i.e("resolvedAsKeyFacetFacet")},"87":function(e,t,n){"use strict";n.d(t,"e",function(){return i});n.d(t,"t",function(){return s});var r=n(32),i=new r.e("invalidation"),s=new r.e("resolved")},"96":function(e,t,n){"use strict";n.d(t,"e",function(){return f});n.d(t,"i",function(){return l});n.d(t,"s",function(){return c});n.d(t,"r",function(){return h});n.d(t,"t",function(){return p});n.d(t,"n",function(){return d});n.d(t,"o",function(){return v});var r=n(113),i=n(573),s=n(171),o=n(184);function u(e){return""+e}var a={lastAutoId:0,mappings:{},inverseMappings:{}},f=Object(s.e)("addKeys"),l=Object(s.e)("mapKeys"),c=Object(s.e)("moveKeys");function h(e,t,n){void 0===e&&(e=a);void 0===n&&(n={});var s=n.graft,h=void 0===s?r.n:s,p={};function d(e){return p[e]||(p[e]={})}if(t)if(f.matches(t)){for(var v=t.payload.keys,m=e.lastAutoId,g={},y=!1,b=0,w=v;b<w.length;b++){var E=w[b];if(!e.mappings[E]){y=!0;var S=u(++m);g[E]=S;d(S)[E]=!0}}e=y?h(e,{lastAutoId:m,mappings:g,inverseMappings:p}):e}else if(c.matches(t)||l.matches(t)){for(var x=t.payload.mappings,T=l.matches(t)?(function(e,t){for(var n,r={},i=0,s=Object.keys(t);i<s.length;i++)for(var o=s[i],u=t[o],a=e.mappings[o],f=a&&e.inverseMappings[a]||((n={})[o]=!0,n),l=0,c=Object.keys(f);l<c.length;l++){var h=c[l];r[h]=u}return r})(e,x):x,N=(g={},{}),C=(m=e.lastAutoId,y=!1,0),k=Object.keys(T);C<k.length;C++){var L=k[C],A=T[L],O=e.mappings[L];O&&(d(O)[L]=new r.e);if(A){if(S=e.mappings[A]||N[A]){d(S)[L]=!0;g[L]=S}else{var M=u(++m);g[A]||(g[A]=M);g[L]=N[A]=M;var _=d(M);_[L]=!0;_[A]=!0}}else O&&(g[L]=new r.e);y=!0}e=y?h(e,{lastAutoId:m,mappings:g,inverseMappings:Object(o.t)(p,function(e){return new i.e(e)})}):e}return e}function p(e,t){return e.mappings[t]}function d(e,t){return e.inverseMappings[t]}function v(e,t){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var s=i[r];n[p(e,s)]=t[s]}return n}},"150":function(e,t,n){"use strict";n.d(t,"t",function(){return a});n.d(t,"e",function(){return f});var r=n(113),i=n(169),s=n(171),o=n(188),u={items:{}},a=Object(s.e)("pruneItems");function f(e,t,n){void 0===e&&(e=u);void 0===n&&(n={});var s=n.graft,f=void 0===s?r.n:s;if(t){if(o.e.matches(t))return f(e,{items:t.payload.items});if(a.matches(t)){for(var l=t.payload.items,c={},h=0,p=Object.keys(l);h<p.length;h++){var d=p[h];c[d]=e.items[d]}return f(e,{items:new i.e(c)})}}return e}},"171":function(e,t,n){"use strict";n.d(t,"e",function(){return s});n.d(t,"t",function(){return o});var r=n(109),i=0;function s(e,t){var n=e+"_"+ ++i;return Object(r.e)(t?function(e){return t({type:n,payload:e})}:function(e){return{type:n,payload:e}},{type:n,actionType:void 0,payloadType:void 0,matches:function(e){return!!e&&e.type===n}})}function o(e){return Object(r.e)(function(t){return e(t)},{actionType:void 0,payloadType:void 0})}},"188":function(e,t,n){"use strict";var r=n(532),i=n(171),s=Object(i.e)("updateItems"),o=Object(i.t)(function(e){return function(t){return t(s(e))}}),u=n(113),a=n(32),f=n(385),l=n(241),c=n(327),h=n(243),p=n(88),d=n(87);var v=function(e){return e};function m(e,t,n){if(n&&Object(u.r)(n))e.deleteItem(t);else if(n&&Object(u.i)(n));else if(n&&"object"==typeof n&&Object.getPrototypeOf(n)!==Object.prototype);else if(n&&"object"==typeof n)for(var r=t===l.e,i=e.configuration,s=e.getItem(t),o=0,f=Object.keys(n);o<f.length;o++){var m=f[o],g=a.e.get(m);if(!(g instanceof c.e||g instanceof h.e)){var y=n[m];if(m===d.e.id){var b=y;b.triggers&&s.patchLegacyInvalidationTriggers(b);continue}var w=(r?i:s).read(g);if(!Object(p.e)(y,w)){var E=void 0;if(y&&Object(u.r)(y))r||s.delete(g);else{if(y&&Object(u.i)(y))E=y.apply(w,{graft:u.n,unlock:v});else if(y&&"object"==typeof y&&Object.getPrototypeOf(y)!==Object.prototype)E=y;else if(y&&"object"==typeof y&&(void 0===w||w&&"object"==typeof w)){E=Object(u.n)(void 0===w?{}:w,y)}else E=y;r?i.set(g,E):s.setValue(g,E)}}}}}var g=Object(i.e)("updateItems"),y=Object(i.t)(function(e){return function(t){t(Object(f.e)(function(t){(function(e,t){for(var n=t.items,r=0,i=Object.keys(n);r<i.length;r++){var s=i[r];m(e,s,n[s])}})(t,e)},{publisher:e.publisher}));return{type:"updateItems"}}});n.d(t,"e",function(){return b});n.d(t,"t",function(){return w});var b=r.e?g:s,w=r.e?y:o},"241":function(e,t,n){"use strict";n.d(t,"t",function(){return i});n.d(t,"e",function(){return s});var r=n(50),i=new(n(32).e)("errorHandler"),s=new r.e("configuration",{}).serialize({})},"243":function(e,t,n){"use strict";n.d(t,"t",function(){return o});n.d(t,"e",function(){return u});n.d(t,"n",function(){return c});var r=n(0),i=n(32),s=n(176),o=Object(i.n)({},{}),u=(function(e){Object(r.__extends)(t,e);function t(t,n){void 0===n&&(n={});var i=e.call(this,t)||this;i._reducer=function(e,t){return t&&e&&i._memoizer(t)(e)||t||e};i._memoizer=(function(e){return Object(s.e)(function(t){return Object(s.e)(function(n){function i(i,s){var o=n(i,s),u={},a=Object(r.__assign)({},s);for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(u[f]=a[f]=o[f]);var l=t(i,a);for(var f in l)if(Object.prototype.hasOwnProperty.call(l,f)){var c=e[f];u[f]=c&&f in o?c.merge(o[f],l[f]):l[f]}return u}i.previous=n;i.current=t;return i})})})(n);return i}Object.defineProperty(t.prototype,"default",{get:function(){return f},enumerable:!0,configurable:!0});t.get=function(e){return i.e.get(e)};t.prototype.compose=function(e,t){return this._reducer(e,t)};t.prototype.evaluate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length>0&&this._reducer(l,e.reduce(this._reducer))||l;return n};return t})(i.e),a={};function f(){return a}function l(e,t){return t}function c(e){return{merge:function(t,n){return e.compose(t,n)}}}},"245":function(e,t,n){"use strict";n.d(t,"t",function(){return c});n.d(t,"e",function(){return h});var r=n(247),i=n(87),s=n(86),o=n(69),u=n(71),a=n(50),f=n(532),l={items:{}};function c(e,t){if(f.e)throw new Error("Called legacy hasUnresolvedDemands. Use LeanItemScope equivalent instead.");var n=p(e,t,!0);return n!==l&&n}function h(e,t){if(f.e)throw new Error("Called legacy excludeResolvedDemands. Use LeanItemScope equivalent instead.");return p(e,t,!1)}function p(e,t,n){for(var r,u,f=t.items,c=!1,h=!0,p={},m=0,g=Object.keys(f);m<g.length;m++){var y=g[m];if(Object(o.t)(y)){c=!0;h=!1}else{var b=e.demandItemFacet(i.t,y),w=e.demandItemFacet(s.r,y),E=e.demandItemFacet(o.r,y)||a.e.get(y),S=f[y].demands,x=!1,T=!0,N={};if(w!==E)for(var C=0,k=Object.keys(S);C<k.length;C++){var L=k[C];if(L!==i.t.id&&L!==o.r.id&&d(e,L,b,E)&&v(e,L,E)){if(n)return{items:(r={},r[y]={demands:(u={},u[L]=!0,u)},r)};x=!0;N[L]=!0}else T=!1}if(x){c=!0;T||(h=!1);p[y]=T?f[y]:{demands:N}}else h=!1}}return n||!c?l:h?t:{items:p}}function d(e,t,n,i){var s=Object(o.e)(i);if(n&&n[t])return!1;var a=e.demandItemFacet(u.t,s);return!!a&&!!a[r.e.id]}function v(e,t,n){var r=Object(o.e)(n),i=e.demandItemFacet(u.n,r);return!i||!!i.demands[t]}},"247":function(e,t,n){"use strict";n.d(t,"e",function(){return r});var r=new(n(32).e)("getItems")},"272":function(e,t,n){"use strict";var r,i=n(243),s=n(50),o=n(241),u="The IItemCache instance may only be used within an invocation of `mapItemCacheToProps` passed to`connectToItemCache`.";(function(e){e[e.read=0]="read";e[e.observe=2]="observe";e[e.demand=3]="demand";e[e.edit=1]="edit"})(r||(r={}));var a=(function(){function e(e){var t=e.dispatch,n=e.contextualControlHandlerCache,r=e.configuration;this.configuration=r;this._scope={isDisposed:!1};this._owner=e.owner||{};this._evaluator=e.evaluator;this._dispatchBlocker=e.dispatchBlocker;this._dispatch=t;this._why=e.why||l;this._contextualControlHandlerCache=n;this._mode=void 0}Object.defineProperty(e.prototype,"why",{get:function(){return this._why()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"dispatch",{get:function(){if(this._scope.isDisposed)throw new Error("Attempted to access the store dispatch on an ItemCache outside of its completed callback. This can cause a memory leak because an ItemCache holds onto stale store state. To obtain the store dispatch, access it during the callback and store it in a local variable.");return this._dispatch},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"contextualControlHandlers",{get:function(){if(this._scope.isDisposed)throw new Error(u);return i.t},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"contextualControlHandlerCache",{get:function(){if(this._scope.isDisposed)throw new Error(u);return this._contextualControlHandlerCache},enumerable:!0,configurable:!0});e.prototype.read=function(e){return this._observeWithMode(e,r.read)};e.prototype.observe=function(e){return this._observeWithMode(e,r.observe)};e.prototype.demand=function(e){return this._observeWithMode(e,r.demand)};e.prototype.edit=function(e){return this._observeWithMode(e,r.edit)};e.prototype.getMode=function(){return this._mode};e.prototype.demandItem=function(e,t,n){void 0===n&&(n={});if(this._scope.isDisposed)throw new Error(u);for(var r={},i=0,s=Object.keys(e);i<s.length;i++){var o=s[i],a=e[o];if(!a)throw new Error("Mapping '"+o+"' was not passed a valid Facet or IFacet instance in demandItem.");r[o]=this.demandItemFacet(a,t,n[o])}return r};e.prototype.demandItemFacet=function(e,t,n){void 0===n&&(n={});if(this._scope.isDisposed)throw new Error(u);var r=n.suppressGetItems,i=void 0===r?e instanceof s.e:r;if(t===o.e)return this.configuration.observe(e);var a=this.getItem(t);return i?a.observe(e):a.demand(e)};e.prototype.isItemFacetResolved=function(e,t){if(this._scope.isDisposed)throw new Error(u);return this.getItem(t).observeIsResolved(e)};e.prototype.getMetaItem=function(e){return this._evaluator.getMetaItem(e)};e.prototype.getItem=function(e){return this._evaluator.getItem(e)};e.prototype.deleteItem=function(e){this._evaluator.deleteItem(e)};e.prototype.mapItems=function(e,t){this._evaluator.mapItem(e,t)};e.prototype.moveItemTo=function(e,t){this._evaluator.moveItem(e,t)};e.prototype.queueEditCallback=function(e){void 0===this._editCallbacks&&(this._editCallbacks=[]);this._editCallbacks.push(e)};e.prototype.queueEditCallbacks=function(e){var t;void 0===this._editCallbacks&&(this._editCallbacks=[]);(t=this._editCallbacks).push.apply(t,e)};e.prototype.getEditCallbacks=function(){return this._editCallbacks};e.prototype.trackObservation=function(e){this._observedValues&&this._observedValues.add(e)};e.prototype.getChangedObservables=function(){return this._changedObservables};e.prototype.getObservedValues=function(){return this._observedValues};e.prototype.trackChangedObservable=function(e){this._changedObservables&&this._changedObservables.add(e)};e.prototype.getDemands=function(){return this._demands};e.prototype.dispose=function(){this._scope.isDisposed=!0};e.prototype.registerDemand=function(e,t){this._demands||(this._demands={});var n=this._demands[e];if(void 0===n){n={demands:{}};this._demands[e]=n}n.demands[t]=!0};e.prototype._observeWithMode=function(e,t){var n=this._dispatchBlocker(function(){return new Error("Attempted to invoke the store dispatch within a callback to an IItemCache. This could disrupt the ability to track dependencies and cause unwanted cascading updates. Instead, hold onto dispatch in a local variable and invoke it in an asynchronous callback, such as an event handler, or simply return it from the selector before using it.")}),i=this._evaluator.getActiveItemCacheObserver();this._evaluator.setActiveItemCacheObserver(this);this._mode=t;t===r.edit?this._changedObservables=new Set:t!==r.observe&&t!==r.demand||(this._observedValues=new Set);this._demands=void 0;this._editCallbacks=void 0;try{return e(this)}finally{this._evaluator.setActiveItemCacheObserver(i);n()}};return e})(),f={};function l(){return f}var c,h,p=(function(){function e(e,t,n,r,i,s){this._value=e;this._evaluator=t;this._observers=void 0;this._onFirstObserver=n;this._onZeroObservers=r;this._valuesAreEqual=s;0}Object.defineProperty(e.prototype,"contextualControlHandlerCache",{get:function(){},enumerable:!0,configurable:!0});e.prototype.dispose=function(){var e=this;void 0!==this._observers&&this._observers.forEach(function(t){t.removeObservation(e)})};e.prototype.observe=function(){this._evaluator.trackObservation(this);return this._value};e.prototype.get=function(){return this._value};e.prototype.getDebugValue=function(){return this.get()};e.prototype.getPrevDebugValue=function(){return this._prevValue};e.prototype.set=function(e){if(this._valuesAreEqual?!this._valuesAreEqual(this._value,e):e!==this._value){0;this._value=e;if(void 0!==this._observers&&this._observers.size>0){this._evaluator.trackChangedObservable(this);this.markAsChanged()}}};e.prototype.markAsChanged=function(e){var t=this;void 0!==this._observers&&this._observers.forEach(function(e){e.markAsChanged(t)})};e.prototype.notifyObservers=function(){void 0!==this._observers&&this._observers.forEach(function(e){e.notifyObservers()})};e.prototype.addObserver=function(e){void 0===this._observers&&(this._observers=new Set);0===this._observers.size&&this._onFirstObserver&&this._onFirstObserver();this._observers.add(e)};e.prototype.removeObserver=function(e){if(void 0===this._observers)return!1;var t=this._observers.delete(e);t&&0===this._observers.size&&this._onZeroObservers&&this._onZeroObservers();return t};Object.defineProperty(e.prototype,"observerCount",{get:function(){return this._observers&&this._observers.size||0},enumerable:!0,configurable:!0});e.prototype.forObserver=function(e){void 0!==this._observers&&this._observers.forEach(function(t){e(t)})};e.prototype.isResolved=function(){return!0};e.prototype.observeIsResolved=function(){return!0};e.prototype.haveDemandsChanged=function(){return!1};e.prototype.registerDemands=function(){};e.prototype.flushDemands=function(){};e.prototype.getUnresolvedDemands=function(){};e.prototype.markDemandsAsFlushed=function(){};e.prototype.getDebugName=function(){return this._getDebugName&&this._getDebugName()||"ItemCacheValue"};return e})(),d=n(86),v=n(327),m=n(69),g=(function(){function e(e,t){this._onNotify=e;this._onMarkAsChanged=t}e.prototype.markAsChanged=function(){this._onMarkAsChanged&&this._onMarkAsChanged()};e.prototype.removeObservation=function(){return!1};e.prototype.notifyObservers=function(){this._onNotify()};e.prototype.getDebugName=function(){return"Subscriber"};e.prototype.forObserver=function(e){};return e})(),y=n(134),b=n(360);(function(e){e[e.dependency=0]="dependency";e[e.selector=1]="selector"})(c||(c={}));(function(e){e[e.observe=0]="observe";e[e.demand=1]="demand"})(h||(h={}));var w,E=(function(){function e(e,t,n,r,i,s,o,u){var a=this;void 0===u&&(u=h.demand);this._getDemandsDebugName=function(){return a.getDebugName()+" > own demands"};this._getOwnUnresolvedDemandsDebugName=function(){return a.getDebugName()+" > own unresolved demands"};this._getDemandsResolvedDebugName=function(){return a.getDebugName()+" > isResolved"};this._dirty=!1;this._didNotify=!0;this._selector=t;this._observers=void 0;this._observations=new Set;this._computed=void 0;this._evaluator=e;this._contextualControlHandlerCache=n;this._onFirstObserver=r;this._onZeroObservers=i;this._demandAggregator=this._evaluator.demandAggregator;this._demandsChanged=!1;this._demands=void 0;this._boundToDemandAggregator=!1;this._changedBy=void 0;this._hasQueuedSelectorWithAggregator=!1;this._resultsAreEqual=o;this._mode=u;0}Object.defineProperty(e.prototype,"selectorFn",{get:function(){return this._selector},enumerable:!0,configurable:!0});e.prototype.subscribe=function(e){var t=this,n=new g(e);this.addObserver(n);return function(){t.removeObserver(n)}};e.prototype.subscribeToDemandResolution=function(e){this._ensureCurrentComputedValue();this._ensureDemandsResolvedState();return this._demandsResolved.subscribe(e)};e.prototype.hasChanged=function(){return this._dirty};e.prototype.haveDemandsChanged=function(){return this._demandsChanged};e.prototype.registerDemands=function(){var e=this;if(this._demandsChanged&&this._mode===h.demand){this._ensureOwnUnresolvedDemandsState();this._demandsChanged=!1;if(!this._boundToDemandAggregator){var t=this._demands;if(void 0!==this._ownUnresolvedDemands&&void 0!==t){var n=new g(function(){if(e._hasQueuedSelectorWithAggregator){e._demandAggregator.flushAllDemands();e._hasQueuedSelectorWithAggregator=!1}},function(){if(!e._hasQueuedSelectorWithAggregator){e._demandAggregator.queueSelector(e);e._hasQueuedSelectorWithAggregator=!0}});this._ownUnresolvedDemands.addObserver(n);this._boundToDemandAggregator=!0}}this._ownUnresolvedDemands&&this._ownUnresolvedDemands.markAsChanged();this._observations.forEach(function(e){e.registerDemands()})}};e.prototype.flushDemands=function(){this._ownUnresolvedDemands&&this._ownUnresolvedDemands.notifyObservers();this._observations.forEach(function(e){e.flushDemands()})};e.prototype.getUnresolvedDemands=function(){var e=this._ownUnresolvedDemands;if(e)return e.get()};e.prototype.markDemandsAsFlushed=function(){this._hasQueuedSelectorWithAggregator=!1};Object.defineProperty(e.prototype,"selector",{set:function(e){var t=this._selector;this._selector=e;if(t!==e){this.markAsChanged();0}},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"contextualControlHandlerCache",{get:function(){return this._contextualControlHandlerCache},enumerable:!0,configurable:!0});e.prototype.dispose=function(){var e,t,n,r=this;this._observations.forEach(function(e){return e.removeObserver(r)});this._observations=new Set;if(void 0!==this._observers){this._observers.forEach(function(e){e.removeObservation(r)});this._observers=void 0}null===(e=this._demands)||void 0===e||e.dispose();null===(t=this._ownUnresolvedDemands)||void 0===t||t.dispose();null===(n=this._demandsResolved)||void 0===n||n.dispose();this._demandAggregator.unqueueSelector(this)};e.prototype.observe=function(){this._ensureCurrentComputedValue();this._evaluator.trackObservation(this);return this._computed.value};e.prototype.get=function(){this._ensureCurrentComputedValue();return this._computed.value};e.prototype.getDebugValue=function(){return this.get()};e.prototype.getPrevDebugValue=function(){return this._prevComputedValue};e.prototype.markAsChanged=function(e){var t=this;if(!this._dirty){this._dirty=!0;this._didNotify=!1;0;void 0!==this._observers&&this._observers.forEach(function(e){e.markAsChanged(t)})}};e.prototype.notifyObservers=function(){if(!this._didNotify){this._didNotify=!0;void 0!==this._observers&&this._observers.forEach(function(e){e.notifyObservers()})}};e.prototype.addObserver=function(e){this._ensureCurrentComputedValue();void 0===this._observers&&(this._observers=new Set);0===this._observers.size&&this._onFirstObserver&&this._onFirstObserver();this._observers.add(e)};e.prototype.removeObserver=function(e){if(void 0===this._observers)return!1;var t=this._observers.delete(e);t&&0===this._observers.size&&this._onZeroObservers&&this._onZeroObservers();return t};Object.defineProperty(e.prototype,"observerCount",{get:function(){return this._observers&&this._observers.size||0},enumerable:!0,configurable:!0});e.prototype.forObserver=function(e){void 0!==this._observers&&this._observers.forEach(function(t){e(t)})};e.prototype.isResolved=function(){this._ensureCurrentComputedValue();this._ensureDemandsResolvedState();return this._demandsResolved.get()};e.prototype.observeIsResolved=function(){this._ensureCurrentComputedValue();this._ensureDemandsResolvedState();return this._demandsResolved.observe()};e.prototype.removeObservation=function(e){return this._observations.delete(e)};e.prototype.getDebugName=function(){return this._getDebugName&&this._getDebugName()||"ItemCacheSelector"};e.prototype._computeValue=function(){var e,t,n=this,r=null===(e=this._demands)||void 0===e?void 0:e.get(),i=this._getEvaluationDebugInformationReader(),s={selector:this._selector,owner:this,contextualControlHandlerCache:this._contextualControlHandlerCache,why:i},o=this._mode===h.demand?this._evaluator.demand(s):this._evaluator.observe(s),u=o.result,a=o.observedValues,f=o.demands;this._setDemands(f);var l=(null===(t=this._demands)||void 0===t?void 0:t.get())!==r,c=!1;this._observations.forEach(function(e){if(!a.has(e)){e.removeObserver(n);n._observations.delete(e);c=!0;l=!0}});a.forEach(function(e){if(void 0===n._computed||!n._observations.has(e)){e.addObserver(n);n._observations.add(e);c=!0;l=!0}l=l||e.haveDemandsChanged()});if(c&&this._demandsResolved){this._demandsResolved.markAsChanged();this._demandsResolved.observerCount>0&&this._evaluator.trackChangedObservable(this._demandsResolved)}this._demandsChanged=l;return this._resultsAreEqual&&this._computed&&this._resultsAreEqual(this._computed.value,u)?this._computed.value:u};e.prototype._ensureCurrentComputedValue=function(){if(this._dirty||void 0===this._computed){0;this._computed={value:this._computeValue()};this._changedBy=void 0;this._dirty=!1}};e.prototype._ensureOwnUnresolvedDemandsState=function(){var t=this;void 0===this._ownUnresolvedDemands&&(this._ownUnresolvedDemands=new e(this._evaluator,function(e){void 0===t._demands&&(t._demands=t._createDemandsObservable(void 0));var n=t._demands.observe();return n&&Object(b.e)(e,{items:n}).items},void 0,void 0,void 0,void 0))};e.prototype._ensureDemandsResolvedState=function(){var t=this;void 0===this._demandsResolved&&(this._demandsResolved=new e(this._evaluator,function(e){void 0===t._demands&&(t._demands=t._createDemandsObservable(void 0));var n=t._demands.observe(),r=!n||!Object(b.t)(e,{items:n});t._observations.forEach(function(e){r=r&&e.observeIsResolved()});return r},void 0,void 0,void 0,void 0))};e.prototype._addChangedBy=function(e){void 0===this._changedBy&&(this._changedBy=new Set);this._changedBy.add(e)};e.prototype._createDemandsObservable=function(e){return new p(e,this._evaluator,void 0,void 0,void 0,S)};e.prototype._setDemands=function(e){void 0===this._demands?void 0!==e&&(this._demands=this._createDemandsObservable(e)):this._demands.set(e)};e.prototype._getEvaluationDebugInformationReader=function(){};return e})();function S(e,t){return Object(y.t)(e,t,x)}function x(e,t){return Object(y.t)(e.demands,t.demands)}var T,N=((w={})[m.r.id]=!0,w[d.r.id]=!0,w),C="Cannot modify an item outside of an edit selector!";(function(e){e[e.read=0]="read";e[e.observe=2]="observe";e[e.demand=3]="demand"})(T||(T={}));var k=(function(){function e(e,t,n){var r=this;this._getMappingDebugName=void 0;this._getFacetDebugName=void 0;this._itemKey=e;this._deserializedItemKey=void 0;this._data=new p(t,n,function(){r._activeDependencies++},function(){r._activeDependencies--;r._lastAccessedTime=Date.now()},this._getMappingDebugName);this._evaluator=n;this._computedValues=void 0;this._activeDependencies=0;this._lastAccessedTime=void 0}Object.defineProperty(e.prototype,"mappedKeys",{get:function(){return this.readData().mappedKeys},enumerable:!0,configurable:!0});e.prototype.readData=function(){return this._data.get()};e.prototype.setData=function(e){this._data.set(e)};e.prototype.observeData=function(){return this._data.observe()};e.prototype.dispose=function(){var e;this._data.dispose();null===(e=this._computedValues)||void 0===e||e.forEach(function(e){e.forEach(function(e){e.dispose()})})};e.prototype.readIsResolved=function(e){if(!this._itemKey)return!1;var t=e.id;if(N[t])return!1;if(e instanceof v.e){return this._getComputation(e,T.read).isResolved()}return this.readData().isResolved(e)};e.prototype.observeIsResolved=function(e){if(!this._itemKey)return!1;var t=e.id;if(N[t])return!1;if(e instanceof v.e){return this._getComputation(e,T.demand).observeIsResolved()}return this.observeData().observeIsResolved(e)};e.prototype.read=function(e){return this._observe(e,T.read)};e.prototype.observe=function(e){return this._observe(e,T.observe)};e.prototype.demand=function(e){return this._observe(e,T.demand)};e.prototype.set=function(e,t){if(void 0===this._evaluator.getActiveItemCacheObserver())throw new Error(C);this.readData().set(e,t);return this};e.prototype.readResolution=function(e){if(void 0!==this._itemKey)return this.readData().getResolution(e)};e.prototype.observeResolution=function(e){if(void 0!==this._itemKey)return this.observeData().observeResolution(e)};e.prototype.setValue=function(e,t){if(void 0===this._evaluator.getActiveItemCacheObserver())throw new Error(C);this.readData().setValue(e,t);return this};e.prototype.setResolution=function(e,t){if(void 0===this._evaluator.getActiveItemCacheObserver())throw new Error(C);this.readData().setResolution(e,t);return this};e.prototype.invalidate=function(e,t){void 0===t&&(t=!1);if(void 0===this._evaluator.getActiveItemCacheObserver())throw new Error(C);if(this._itemKey){this.readData().invalidate(e,t)}return this};e.prototype.patchLegacyInvalidationTriggers=function(e){this.readData().patchLegacyInvalidationTriggers(e)};e.prototype.mapTo=function(e){this._itemKey&&this._evaluator.mapItem(this._itemKey,e)};e.prototype.moveTo=function(e){this._itemKey&&this._evaluator.moveItem(this._itemKey,e)};e.prototype.delete=function(e){if(void 0===this._evaluator.getActiveItemCacheObserver())throw new Error(C);e?this.readData().delete(e):this._itemKey&&this._evaluator.deleteItem(this._itemKey)};e.prototype.isGarbageCollectable=function(e){void 0===e&&(e=864e5);var t=this.readData(),n=(this._activeDependencies||0)+(t.activeValues||0),r=this._lastAccessedTime&&t.lastAccessedTime&&Math.max(this._lastAccessedTime,t.lastAccessedTime)||this._lastAccessedTime||t.lastAccessedTime||Date.now();return 0===n&&(!e||r<Date.now()-e)};e.prototype.reset=function(){this.readData().reset()};e.prototype.markAsNeeded=function(){var e=this,t=!1;this._activeDependencies++;return function(){if(!t){e._activeDependencies--;t=!0}}};e.prototype.markAsPermanent=function(){this._activeDependencies++};e.prototype.merge=function(e){var t=this._evaluator.getActiveItemCacheObserver();if(void 0===t)throw new Error(C);var n=e.readData(),r=this.readData();r.mergeFrom(n);var i=r.mappedKeys;n.mappedKeys.forEach(function(e){var n=t.getItem(e);n&&n.setData(r);i.add(e)});n.dispose()};e.prototype.move=function(e){if(void 0===this._evaluator.getActiveItemCacheObserver())throw new Error(C);var t=e.readData(),n=t.mappedKeys;n.delete(this._itemKey);e.setData(this.readData());this.readData().mappedKeys.add(this._itemKey);0===n.size&&t.dispose()};e.prototype._observe=function(e,t){var n=this._evaluator.getActiveItemCacheObserver();if(n){var r=n.getMode();r&&(t=Math.min(t,r))}return e instanceof i.e?this._observeControl(e,t):e instanceof v.e?this._observeComputedValue(e,t):this._observeValue(e,t)};e.prototype._observeValue=function(e,t){if(void 0!==this._itemKey){var n=(t===T.read?this.readData():this.observeData()).observeValue(e,t);if(void 0===n&&e instanceof s.e&&e.matches(this._itemKey)){void 0===this._deserializedItemKey&&(this._deserializedItemKey=e.deserialize(this._itemKey));n=this._deserializedItemKey}if(t===T.demand){var r=this._evaluator.getActiveItemCacheObserver(),i=e.id;r&&this._itemKey&&!N[i]&&r.registerDemand(this._itemKey,i)}return n}};e.prototype._observeControl=function(e,t){var n=this.observe(m.r)||this._itemKey&&s.e.get(this._itemKey)||void 0;return this._evaluator.observeControlByKeyFacet(n,e,t)};e.prototype._observeComputedValue=function(e,t){var n=this._getComputation(e,t);return t===T.read?n.get():n.observe()};e.prototype._getComputation=function(e,t){var n,r,i,s=this,o=(e.id,null===(n=this._evaluator.getActiveItemCacheObserver())||void 0===n?void 0:n.contextualControlHandlerCache),u=null===(r=this._computedValues)||void 0===r?void 0:r.get(o),a=e.id+"_"+t.toString(),f=null===(i=u)||void 0===i?void 0:i.get(a);if(void 0===f){var l=function(t){return e.compute(t,{itemKey:s._itemKey})};l.selector=e.compute;void 0===this._computedValues&&(this._computedValues=new Map);f=new E(this._evaluator,l,o,function(){s._activeDependencies++},function(){var e,t;s._activeDependencies--;s._lastAccessedTime=Date.now();null===(e=f)||void 0===e||e.dispose();if(u){u.delete(a);0===u.size&&(null===(t=s._computedValues)||void 0===t||t.delete(o))}},void 0,void 0,t===T.demand?h.demand:h.observe);if(void 0===u){u=new Map;this._computedValues.set(o,u)}u.set(a,f)}return f};return e})(),L=n(384),A=n(113),O=n(247),M=n(184),_=n(406),D=(function(){function e(e,t){this._keyFacet=e;this._evaluator=t;this._controlHandlers=new Map;this._operationHandlers=new Map}e.prototype.dispose=function(){this._controlHandlers.forEach(function(e){e&&e.dispose()});this._operationHandlers.forEach(function(e){var t=e.isRegistered;t&&t.dispose()})};e.prototype.setSupportedFacets=function(e){if(void 0===this._evaluator.getActiveItemCacheObserver())throw new Error("Cannot modify a meta item outside of an edit selector!");this._supportedFacets=e;var t=Object(M.e)(e.map(function(e){return e.id}),function(){return!0}),n=[];this.patchOperationQueue(O.e,new _.e(t,function(e){n.push.apply(n,e)}));if(n)for(var r=0,i=n;r<i.length;r++){i[r].resolve()}return this};e.prototype.readSupportedFacets=function(){return this._supportedFacets};e.prototype.observeControlHandler=function(e){var t=e.id,n=this._controlHandlers.get(t);if(this._evaluator.getActiveItemCacheObserver()&&void 0===n){n=new p(void 0,this._evaluator);this._controlHandlers.set(t,n)}return n&&n.observe()};e.prototype.registerLegacyControlHandler=function(e,t){var n=this,r=this._evaluator.getActiveItemCacheObserver();if(void 0===r)throw new Error("Cannot modify a meta item outside of an edit selector!");var i=e.id,s=this._controlHandlers.get(i),o=!1;if(void 0===s){s=new p(void 0,this._evaluator);this._controlHandlers.set(i,s);o=!0}r.queueEditCallback(function(){var i=(0,r.dispatch)(t({keyFacet:n._keyFacet,controlFacet:e}));if(s){s.set(i);o||s.observerCount>0&&n._evaluator.trackChangedObservable(s,!0)}});return this};e.prototype.observeHasOperationHandler=function(e){var t,n=e.id,r=this._operationHandlers.get(n);if(this._evaluator.getActiveItemCacheObserver()&&void 0===r){r={isRegistered:new p(!1,this._evaluator),queue:void 0,operator:void 0};this._operationHandlers.set(n,r)}return(null===(t=r)||void 0===t?void 0:t.isRegistered)&&r.isRegistered.observe()||!1};e.prototype.registerLegacyOperationHandler=function(e,t){var n=this,r=this._evaluator.getActiveItemCacheObserver();if(void 0===r)throw new Error("Cannot modify a meta item outside of an edit selector!");var i=e.id,s=Object(L.t)({operationTypeFacet:e,keyFacet:this._keyFacet}),o=this._operationHandlers.get(i);if(void 0===o){o={isRegistered:new p(!0,this._evaluator),queue:void 0,operator:void 0};this._operationHandlers.set(i,o)}else o.isRegistered.set(!0);r.queueEditCallback(function(){var i=r.dispatch(t({key:s,keyFacet:n._keyFacet,operationTypeFacet:e}));o&&(o.operator=i);i()});return this};e.prototype.readOperator=function(e){var t;return null===(t=this._operationHandlers.get(e.id))||void 0===t?void 0:t.operator};e.prototype.patchOperationQueue=function(e,t){var n=this._operationHandlers.get(e.id);n&&this._operationHandlers.set(e.id,Object(A.n)(n,{queue:t}))};e.prototype.readOperationQueue=function(e){var t=this._operationHandlers.get(e.id);return t&&t.queue};return e})(),P=n(273),H=(function(){function e(e){var t=e.configuration;this.configuration=t;this._evaluator=e.evaluator}e.prototype.getItem=function(e){return this._evaluator.getItem(e)};return e})(),B=n(32),j={},F=(function(){function e(e,t){this.getFacetDebugName=void 0;this.facetMap=new Map;var n=new Set;n.add(e);this.mappedKeys=n;this.activeValues=0;this.lastAccessedTime=void 0;this._evaluator=t}e.prototype.dispose=function(){this.facetMap.forEach(function(e){var t,n;null===(t=e.value)||void 0===t||t.dispose();null===(n=e.resolution)||void 0===n||n.dispose()})};e.prototype.observeValue=function(e,t){var n,r,i=e.id,s=this.facetMap,o=s.get(i),u=t===T.read;if(void 0===o||void 0===o.value){if(this._evaluator.getActiveItemCacheObserver()&&!u){var a=j;if(void 0===o){o={value:this._createFacetValue(a,i),resolution:void 0};s.set(i,o)}else o.value=this._createFacetValue(a,i)}}var f=o&&o.value,l=u?null===(r=f)||void 0===r?void 0:r.get():null===(n=f)||void 0===n?void 0:n.observe();if(l!==j)return l};e.prototype.isResolved=function(e){var t,n,r=e.id,i=null===(n=null===(t=this.facetMap.get(r))||void 0===t?void 0:t.resolution)||void 0===n?void 0:n.get();return Object(d.t)(i)};e.prototype.observeIsResolved=function(e){var t,n,r=e.id,i=this.facetMap,s=i.get(r);if(this._evaluator.getActiveItemCacheObserver())if(void 0===s){s={value:void 0,resolution:this._createFacetResolution("",r)};i.set(r,s)}else void 0===s.resolution&&(s.resolution=this._createFacetResolution("",r));var o=null===(n=null===(t=s)||void 0===t?void 0:t.resolution)||void 0===n?void 0:n.observe();return Object(d.t)(o)};e.prototype.getResolution=function(e){var t,n=e.id,r=this.facetMap.get(n);return r&&(null===(t=r.resolution)||void 0===t?void 0:t.get())};e.prototype.observeResolution=function(e){var t,n=e.id,r=this.facetMap,i=r.get(n);if(this._evaluator.getActiveItemCacheObserver()&&(void 0===i||void 0===i.resolution))if(void 0===i){i={value:void 0,resolution:this._createFacetResolution("",n)};r.set(n,i)}else i.resolution=this._createFacetResolution("",n);var s=null===(t=i&&i.resolution)||void 0===t?void 0:t.observe();if(s!==j)return s};e.prototype.set=function(e,t){var n=e.id,r=this.facetMap,i=r.get(n);if(void 0===i){i={value:this._createFacetValue(t,n),resolution:this._createFacetResolution("resolved",n)};r.set(n,i)}else{void 0===i.value?i.value=this._createFacetValue(t,n):i.value.set(t);void 0===i.resolution?i.resolution=this._createFacetResolution("resolved",n):i.resolution.set("resolved")}};e.prototype.setValue=function(e,t){var n=e.id,r=this.facetMap,i=r.get(n);if(void 0===i){i={value:this._createFacetValue(t,n),resolution:void 0};r.set(n,i)}else void 0===i.value?i.value=this._createFacetValue(t,n):i.value.set(t)};e.prototype.setResolution=function(e,t){var n=e.id,r=this.facetMap,i=r.get(n);if(void 0===i){i={value:void 0,resolution:this._createFacetResolution(t,n)};r.set(n,i)}else void 0===i.resolution?i.resolution=this._createFacetResolution(t,n):i.resolution.set(t)};e.prototype.delete=function(e){var t,n,r,i=this.facetMap,s=i.get(e.id),o=!1;if(s){if(s.value&&s.value.observerCount>0){s.value.set(j);o=!0}else null===(t=s.value)||void 0===t||t.dispose();if(s.resolution&&s.resolution.observerCount>0){s.resolution.set("");o=!0}else null===(n=s.resolution)||void 0===n||n.dispose();null===(r=s.resolution)||void 0===r||r.dispose()}o||i.delete(e.id)};e.prototype.reset=function(){this.facetMap.forEach(function(e){var t=e.resolution;t&&"failed"===t.get()&&t.set("")});this.delete(d.r);this.delete(d.e)};e.prototype.invalidate=function(e,t){void 0===t&&(t=!1);var n=this._evaluator.getActiveItemCacheObserver(),r=e.id,i=this._invalidation;this.setResolution(e,"");this.setValue(d.r,void 0);if(n&&i&&!t){var s=i.triggers,o=s[r];if(o){delete s[r];var u=o.targets,a=o.callbacks;if(u)for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var l=u[f];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&l[c]&&n.getItem(f).invalidate(B.e.get(c),t)}a&&a.length>0&&n.queueEditCallback(function(){for(var e=n.dispatch,t=0,r=a;t<r.length;t++){e((0,r[t])())}})}}};e.prototype.patchLegacyInvalidationTriggers=function(e){this._invalidation=Object(A.n)(this._invalidation||{triggers:{}},e)};e.prototype.mergeFrom=function(e){var t=this;e.facetMap.forEach(function(e,n){var r,i=null===(r=e.value)||void 0===r?void 0:r.get();i!==j&&t.set(B.e.get(n),i)})};e.prototype.forFacet=function(e){this.facetMap.forEach(function(t,n){var r,i,s=null===(r=t.value)||void 0===r?void 0:r.get(),o=null===(i=t.resolution)||void 0===i?void 0:i.get(),u=s===j,a=void 0===o;if(!(u&&a)){var f={};u||(f.value=s);a||(f.resolution=o);e(f,n)}})};e.prototype._createFacetValue=function(e,t){var n=this;return this._createFacetItemCacheValue(e,t,function(){n.activeValues++},function(){var e,r;n.activeValues--;n.lastAccessedTime=Date.now();var i=n.facetMap,s=i.get(t),o=null===(e=s)||void 0===e?void 0:e.value,u=null===(r=s)||void 0===r?void 0:r.resolution;if(s&&o&&o.get()===j){o.dispose();s.value=void 0;void 0===u&&i.delete(t)}})};e.prototype._createFacetResolution=function(e,t){var n=this;return this._createFacetItemCacheValue(e,t,function(){n.activeValues++},function(){var e,r;n.activeValues--;n.lastAccessedTime=Date.now();var i=n.facetMap,s=i.get(t),o=null===(e=s)||void 0===e?void 0:e.value,u=null===(r=s)||void 0===r?void 0:r.resolution;if(s&&u&&Object(d.n)(u.get())){u.dispose();s.resolution=void 0;void 0===o&&i.delete(t)}})};e.prototype._createFacetItemCacheValue=function(e,t,n,r){return new p(e,this._evaluator,n,r,void 0)};return e})(),I=0,q=(function(){function e(e,t,n){this._getControlFacetDebugName=void 0;this._getMergedControlFacetDebugName=void 0;this._id=I++;this._parentManager=n;this._mergedControlHandlers=void 0;this._values=void 0;this._evaluator=t;if(void 0!==e){this._inverseFacetMapping={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];this._inverseFacetMapping[i.id]=r}}else this._inverseFacetMapping=void 0}e.prototype.dispose=function(){var e,t,n=this;null===(e=this._ownControlHandlers)||void 0===e||e.forEach(function(e){e&&e.dispose()});null===(t=this._mergedControlHandlers)||void 0===t||t.forEach(function(e,t){e&&n._parentManager&&n._hasOwn(t)&&e.dispose()})};e.prototype.hasOwn=function(e){return this._hasOwn(e.id)};e.prototype.getParent=function(){return this._parentManager};e.prototype.setValues=function(e){var t,n=this;if(e!==this._values){this._values=e;null===(t=this._ownControlHandlers)||void 0===t||t.forEach(function(t,r){if(t){var i=e[n._getValueKeyFromFacet(r)];t.set(i)}})}};e.prototype.createChildManager=function(t){void 0===t&&(t=void 0);return new e(t,this._evaluator,this)};e.prototype.observe=function(e){var t;return null===(t=this.getMergedControlHandler(e))||void 0===t?void 0:t.observe()};e.prototype.notifyObservers=function(){var e;null===(e=this._mergedControlHandlers)||void 0===e||e.forEach(function(e,t){e&&e.notifyObservers()})};e.prototype.getMergedControlHandler=function(e){var t,n=this;void 0===this._mergedControlHandlers&&(this._mergedControlHandlers=new Map);var r,i=e.id;if(this._mergedControlHandlers.has(i))r=this._mergedControlHandlers.get(i);else{if(void 0===this._parentManager)r=this._hasOwn(i)?this._getOwnItemCacheValue(e):void 0;else if(this._hasOwn(i)){r=new E(this._evaluator,function(t){var r=n._parentManager&&n._parentManager.observe(e),i=n._observeOwn(e);return r&&e.compose(i,r)||i},void 0,void 0,function(){var e;null===(e=r)||void 0===e||e.dispose();n._mergedControlHandlers&&n._mergedControlHandlers.delete(i)},void 0)}else r=null===(t=this._parentManager)||void 0===t?void 0:t.getMergedControlHandler(e);this._mergedControlHandlers.set(i,r)}return r};e.prototype._hasOwn=function(e){return void 0===this._inverseFacetMapping||!!this._inverseFacetMapping[e]};e.prototype._getOwnItemCacheValue=function(e){void 0===this._ownControlHandlers&&(this._ownControlHandlers=new Map);var t=e.id,n=this._ownControlHandlers.get(t);if(void 0===n){var r=this._getValueKeyFromFacet(t);n=new p(this._values&&this._values[r],this._evaluator,void 0,void 0,void 0);this._ownControlHandlers.set(t,n)}return n};e.prototype._observeOwn=function(e){return this._getOwnItemCacheValue(e).observe()};e.prototype._getValueKeyFromFacet=function(e){return void 0!==this._inverseFacetMapping?this._inverseFacetMapping[e]:e};return e})();n.d(t,"e",function(){return R});n.d(t,"t",function(){return U});var R=(function(){function e(e,t,n,r){this._getControlFacetDebugName=void 0;this.dispatch=e;this.dispatchBlocker=t;this._activeObserver=void 0;this._storeUpdateBatcher=r;this._metaItemMap=new Map;this._itemMap=new Map;this._controls=new Map;this.demandAggregator=n;this.configuration=new k(o.e,new F(o.e,this),this)}Object.defineProperty(e.prototype,"reader",{get:function(){void 0===this._reader&&(this._reader=new H({configuration:this.configuration,evaluator:this}));return this._reader},enumerable:!0,configurable:!0});e.prototype.read=function(e){var t,n=e.selector,r=e.contextualControlHandlerCache,i=new a({dispatch:this.dispatch,evaluator:this,dispatchBlocker:this.dispatchBlocker,configuration:this.configuration,contextualControlHandlerCache:r});try{t=i.read(n)}finally{i.dispose()}return t};e.prototype.observe=function(e){var t,n=e.selector,r=e.owner,i=e.contextualControlHandlerCache,s=e.why,o=new a({dispatch:this.dispatch,owner:r,evaluator:this,dispatchBlocker:this.dispatchBlocker,configuration:this.configuration,contextualControlHandlerCache:i,why:s});try{t={result:o.observe(n),observedValues:o.getObservedValues()||new Set}}finally{o.dispose()}return t};e.prototype.demand=function(e){var t,n=e.selector,r=e.owner,i=e.contextualControlHandlerCache,s=e.why,o=new a({dispatch:this.dispatch,owner:r,evaluator:this,dispatchBlocker:this.dispatchBlocker,configuration:this.configuration,contextualControlHandlerCache:i,why:s});try{t={result:o.demand(n),observedValues:o.getObservedValues()||new Set,demands:o.getDemands()}}finally{o.dispose()}return t};e.prototype.edit=function(e){var t,n=e.selector,r=e.owner,i=e.contextualControlHandlerCache,s=new a({dispatch:this.dispatch,owner:r,evaluator:this,dispatchBlocker:this.dispatchBlocker,configuration:this.configuration,contextualControlHandlerCache:i});try{t={result:s.edit(n),changedObservables:s.getChangedObservables()||new Set};var o=s.getEditCallbacks();if(o)for(var u=0,f=o;u<f.length;u++){(0,f[u])()}}finally{s.dispose()}return t};e.prototype.createItemCacheSelector=function(e,t){void 0===t&&(t={});var n=t.contextualControlHandlerCache,r=(t.debugName,t.suppressGetItems);return new E(this,e,n,void 0,void 0,void 0,void 0,void 0!==r&&r?h.observe:h.demand)};e.prototype.createContextualControlHandlerManager=function(e){void 0===e&&(e=void 0);return new q(e,this,void 0)};e.prototype.trackObservation=function(e){this._activeObserver&&this._activeObserver.trackObservation(e)};e.prototype.trackChangedObservable=function(e,t){void 0===t&&(t=!1);this._activeObserver?this._activeObserver.trackChangedObservable(e):t&&this._storeUpdateBatcher.queueChangedObservable(e)};e.prototype.setActiveItemCacheObserver=function(e){this._activeObserver=e};e.prototype.getActiveItemCacheObserver=function(){return this._activeObserver};e.prototype.getMetaItem=function(e){var t=e.id,n=this._metaItemMap.get(t);if(void 0===n){n=new D(e,this);this._metaItemMap.set(t,n)}return n};e.prototype.getItem=function(e){var t=this._itemMap.get(e);if(void 0===t){t=new k(e,new F(e,this),this);this._itemMap.set(e,t)}return t};e.prototype.mapItem=function(e,t){if(void 0===this.getActiveItemCacheObserver())throw new Error("Cannot map items outside of an edit selector!");var n=this._itemMap.get(e),r=this._itemMap.get(t);if(n&&r)n.readData()!==r.readData()&&r.merge(n);else if(n){var i=n.readData();i.mappedKeys.add(t);this._itemMap.set(t,new k(t,i,this))}else if(r){var s=r.readData();s.mappedKeys.add(e);this._itemMap.set(e,new k(e,s,this))}else{var o=new F(e,this);o.mappedKeys.add(t);var u=new k(e,o,this);this._itemMap.set(e,u);var a=new k(t,o,this);this._itemMap.set(t,a)}};e.prototype.moveItem=function(e,t){if(void 0===this.getActiveItemCacheObserver())throw new Error("Cannot move items outside of an edit selector!");var n=this._itemMap.get(e),r=this._itemMap.get(t);if(n&&r)n.readData()!==r.readData()&&r.move(n);else if(n){(u=new k(t,new F(t,this),this)).move(n);this._itemMap.set(t,u)}else if(r){var i=r.readData(),s=new k(e,i,this);i.mappedKeys.add(e);this._itemMap.set(e,s)}else{var o=new F(e,this);o.mappedKeys.add(t);s=new k(e,o,this);this._itemMap.set(e,s);var u=new k(t,o,this);this._itemMap.set(t,u)}};e.prototype.deleteItem=function(e){this._deleteItem(e)};e.prototype.performGarbageCollection=function(e){var t=this;void 0===e&&(e={});var n=e.minAge;this._itemMap.forEach(function(e,r){e.isGarbageCollectable(n)&&t._deleteItem(r,e)})};e.prototype.observeControlByKeyFacet=function(e,t,n){var r=this,i=t.id,s=this.getActiveItemCacheObserver(),o=s&&s.contextualControlHandlerCache,u=this._controls.get(o);if(void 0===u){u=new Map;this._controls.set(o,u)}var a=n===T.read,f=i+(e&&e.id?"|"+e.id:""),l=u.get(f);if(void 0===l){var c=function(n){var r,i=e&&n.getMetaItem(e)||void 0,s=null===(r=o)||void 0===r?void 0:r.observe(t),u=i&&i.observeControlHandler(t);return t.compose(u,s)};if(a)return this.read({selector:c});l=new E(this,c,void 0,void 0,function(){var e;null===(e=l)||void 0===e||e.dispose();var t=r._controls.get(o);if(t){t.delete(f);0===t.size&&r._controls.delete(o)}},void 0,void 0,n===T.demand?h.demand:h.observe);u.set(f,l)}return l&&(a?l.get():l.observe())};e.prototype.forItem=function(e){this._itemMap.forEach(e)};e.prototype._deleteItem=function(e,t){if(t=t||this._itemMap.get(e)){var n=t.readData(),r=n.mappedKeys;r.size<=1?n.dispose():r.delete(e);t.dispose();this._itemMap.delete(e);return!0}return!1};return e})(),U=Object(P.e)(function(e){throw"ItemCacheEvaluator initialization should be handled by ItemCacheStore itself"})},"273":function(e,t,n){"use strict";n.d(t,"t",function(){return a});n.d(t,"e",function(){return f});var r=n(32),i=n(407),s=n(109),o=new r.e("runOnce"),u=new i.e("runOnce");function a(e){return o.unpack(e)}function f(e){return Object(s.e)(function(t){return t(e)},o.pack(u.serializeNext()))}},"275":function(e,t,n){"use strict";n.d(t,"e",function(){return r});n.d(t,"t",function(){return i});var r=new(n(32).e)("onDispatchInSelector");function i(e){console.warn(e)}},"327":function(e,t,n){"use strict";n.d(t,"e",function(){return i});var r=n(0),i=(function(e){Object(r.__extends)(t,e);function t(t,n){var r=e.call(this,t)||this;r.compute=n;return r}return t})(n(32).e)},"349":function(e,t,n){"use strict";n.d(t,"r",function(){return c});n.d(t,"n",function(){return p});n.d(t,"e",function(){return d});n.d(t,"t",function(){return v});var r=n(150),i=n(188),s=n(96),o=n(113),u=n(169),a=n(171),f=n(109),l=n(359),c=Object(a.e)("processItems"),h={itemMap:Object(r.e)(void 0,void 0),keyMap:Object(s.r)(void 0,void 0),revision:0};function p(e,t,n){void 0===e&&(e=h);void 0===n&&(n={});var a=n.graft,v=void 0===a?o.n:a,m=n.unlock,g=void 0===m?function(e){return e}:m,y=e;if(t)if(l.e.matches(t))for(var b=0,w=t.payload.actions;b<w.length;b++){y=p(y,w[b],n)}else if(c.matches(t))y=t.payload.processState(e,{graft:v,reducer:function(e,t){return p(e,t,n)},unlock:g});else if(s.i.matches(t))y=(function(e,t,n){for(var o=n.graft,a=[],f=0,l=Object.keys(t.payload.mappings);f<l.length;f++){var c=l[f];if(w=t.payload.mappings[c]){var h=d(e,w),p=d(e,c);(E=o({mergedItem:h},{mergedItem:p}).mergedItem)&&a.push({toKey:w,mergedItem:E})}}for(var v={},m=Object(s.r)(e.keyMap,Object(s.i)(t.payload),n),g=0,y=a;g<y.length;g++){var b=y[g],w=b.toKey,E=b.mergedItem,S=Object(s.t)(m,w);S&&(v[S]=E)}return o(e,{keyMap:new u.e(m),itemMap:new u.e(Object(r.e)(e.itemMap,Object(i.e)({items:v}),n))})})(e,t,{graft:v});else if(i.e.matches(t)){var E=t.payload.items,S=Object(s.r)(e.keyMap,Object(s.e)({keys:Object.keys(E)}),n);y=v(e,{keyMap:new u.e(S),itemMap:new u.e(Object(r.e)(e.itemMap,Object(i.e)({items:Object(s.o)(S,E)}),n))})}else if(r.t.matches(t)){E=t.payload.items;y=v(e,{itemMap:new u.e(Object(r.e)(e.itemMap,Object(r.t)({items:Object(s.o)(e.keyMap,E)}),n))})}else y=v(e,{keyMap:new u.e(Object(s.r)(e.keyMap,t,n)),itemMap:new u.e(Object(r.e)(e.itemMap,t,n))});y!==e&&Object(f.e)(y,{revision:e.revision+1});return y}function d(e,t){return e.itemMap.items[Object(s.t)(e.keyMap,t)]}function v(e,t){var n=Object(s.t)(e.keyMap,t);return n?Object(s.n)(e.keyMap,n):void 0}},"359":function(e,t,n){"use strict";n.d(t,"e",function(){return s});var r=n(0),i=n(171),s=Object(i.e)("processBatch",function(e){var t=e.payload;return Object(r.__assign)(Object(r.__assign)({},e),{payload:Object(r.__assign)(Object(r.__assign)({},t),{actions:o(t.actions)})})});function o(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];if(s.matches(i))for(var o=0,u=i.payload.actions;o<u.length;o++){var a=u[o];t.push(a)}else t.push(i)}return t}},"360":function(e,t,n){"use strict";n.d(t,"t",function(){return f});n.d(t,"e",function(){return l});var r=n(247),i=n(86),s=n(69),o=n(50),u=n(32),a={items:{}};function f(e,t){for(var n=t.items,r=0,u=Object.keys(n);r<u.length;r++){var a=u[r],f=e.getItem(a),l=f.observe(i.r),p=f.observe(s.r)||o.e.get(a),d=n[a].demands;if(l!==p)for(var v=e.getMetaItem(p),m=0,g=Object.keys(d);m<g.length;m++){var y=g[m];if(y!==s.r.id&&c(y,f,v)&&h(y,v))return!0}}return!1}function l(e,t){for(var n=t.items,r=!1,u=!0,f={},l=0,p=Object.keys(n);l<p.length;l++){var d=p[l];if(Object(s.t)(d)){r=!0;u=!1}else{var v=e.getItem(d),m=v.observe(i.r),g=v.observe(s.r)||o.e.get(d),y=n[d].demands,b=!1,w=!0,E={};if(m!==g)for(var S=e.getMetaItem(g),x=0,T=Object.keys(y);x<T.length;x++){var N=T[x];if(N!==s.r.id&&c(N,v,S)&&h(N,S)){b=!0;E[N]=!0}else w=!1}if(b){r=!0;w||(u=!1);f[d]=w?n[d]:{demands:E}}else u=!1}}return r?u?t:{items:f}:a}function c(e,t,n){var s,o=null===(s=t)||void 0===s?void 0:s.observeResolution(u.e.get(e));return!!Object(i.n)(o)&&n.observeHasOperationHandler(r.e)}function h(e,t){var n=t.readSupportedFacets(),r=u.e.get(e);return!n||!!r&&n.indexOf(r)>-1}},"363":function(e,t,n){"use strict";n.d(t,"e",function(){return r});var r=new(n(243).e)("itemCacheSuspense")},"384":function(e,t,n){"use strict";n.d(t,"t",function(){return o});n.d(t,"e",function(){return u});var r=n(50),i=n(32),s=new r.e("operation",{operationTypeId:Object(r.s)(),keyFacetId:Object(r.s)()});function o(e){var t=e.operationTypeFacet,n=e.keyFacet;return s.serialize({operationTypeId:t.id,keyFacetId:n.id})}function u(e){var t=s.deserialize(e),n=t.keyFacetId,r=t.operationTypeId;return{keyFacet:i.e.get(n),operationTypeFacet:i.e.get(r)}}},"385":function(e,t,n){"use strict";n.d(t,"e",function(){return s});var r=n(272),i=n(408);function s(e,t){void 0===t&&(t={});var n=t.contextualControlHandlerCache,s=t.publisher;return function(t){var o=s||e,u=t(r.t).edit({selector:e,contextualControlHandlerCache:n,owner:o}),a=u.result,f=u.changedObservables;t(i.t).queueChangedObservables(f,o);return a}}},"389":function(e,t,n){"use strict";var r,i,s=n(0),o=n(247),u=n(349),a=n(86),f=n(87),l=n(134),c=n(109),h=n(69),p=n(71),d=n(50),v=n(327),m=n(243),g=n(88),y=n(112),b=n(176),w=n(245),E="The IItemCache instance may only be used within an invocation of `mapItemCacheToProps` passed to`connectToItemCache`.",S=((r={})[h.r.id]=!0,r[a.r.id]=!0,r[f.t.id]=!0,r[p.n.id]=!0,r[p.e.id]=!0,r[p.t.id]=!0,r),x=((i={})[f.t.id]=!0,i[p.n.id]=!0,i[p.e.id]=!0,i[p.t.id]=!0,i),T=Object(b.e)(function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){for(var i=r[n],s={},o=0,u=Object.keys(e[i]);o<u.length;o++){s[u[o]]=!0}t[i]={demands:s}}return t}),N=Object(b.e)(function(e){var t=Object(y.e)(),n=Object(b.e)(function(t){var n=Object(h.e)(t),r=Object(u.e)(e,n),i=r&&p.e.unpack(r),s=r&&p.n.unpack(r),a=r&&p.t.unpack(r);return{keyFacetItemKey:n,controlHandlers:i,isOperationHandlerRegistered:a&&a[o.e.id],supportedFacets:s}});return function(r){var i=t.get(r||"");if(i)return i;var s=r&&Object(u.e)(e,r)||void 0;if(Object(h.t)(r))i={item:s,isMeta:!0,preferredKeyFacet:void 0,keyFacetData:void 0};else{var o=s&&h.r.unpack(s),a=o||r&&d.e.get(r)||void 0;i={item:s,isMeta:!1,preferredKeyFacet:o,keyFacetData:a&&n(a)}}t.set(r||"",i);return i}}),C=(function(){function e(e){var t=e.dispatch,n=e.state;this._scope={isDisposed:!1};this._getItemData=N(n);this._state=n;this._previousDemandResolutions=e.previousDemandResolutions;this._previousDependencies=e.previousDependencies;this._contextualControlHandlers=e.contextualControlHandlers||m.t;this._owner=e.owner||{};this._why=e.why||j;this._evaluator=e.evaluator;this._dispatchBlocker=e.dispatchBlocker;this._entries=Object(y.e)();this._dispatch=t}Object.defineProperty(e.prototype,"why",{get:function(){return this._why()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"dispatch",{get:function(){if(this._scope.isDisposed)throw new Error("Attempted to access the store dispatch on an ItemCache outside of its completed callback. This can cause a memory leak because an ItemCache holds onto stale store state. To obtain the store dispatch, access it during the callback and store it in a local variable.");return this._dispatch},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"contextualControlHandlers",{get:function(){if(this._scope.isDisposed)throw new Error("Attempted to access the control handlers on an ItemCache outside of its completed callback. This can cause a memory leak because an ItemCache holds onto stale store state. To obtain the control handlers, access them during the callback and store it in a local variable.");return this._contextualControlHandlers},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"contextualControlHandlerCache",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"configuration",{get:function(){throw new Error("The `configuration` property is not implemented in this version of ItemsScope. Use `getConfiguration` to access configuration properties.")},enumerable:!0,configurable:!0});e.prototype.getItem=function(e){throw new Error("The `getItem` method is not implemented in this version of ItemsScope. Use `demandItemFacet` to access item properties.")};e.prototype.getMetaItem=function(e){throw new Error("The `getMetaItem` method is not implemented in this version of ItemsScope. Use `demandItemFacet` to access meta item properties.")};e.prototype.evaluate=function(e){var t=this._dispatchBlocker(function(){return new Error("Attempted to invoke the store dispatch within a callback to an IItemCache. This could disrupt the ability to track dependencies and cause unwanted cascading updates. Instead, hold onto dispatch in a local variable and invoke it in an asynchronous callback, such as an event handler, or simply return it from the selector before using it.")});try{return{result:this.evaluateSelector(e)}}finally{t()}};e.prototype.demandItem=function(e,t,n){void 0===n&&(n={});if(this._scope.isDisposed)throw new Error(E);for(var r={},i=0,s=Object.keys(e);i<s.length;i++){var o=s[i],u=e[o];if(!u)throw new Error("Mapping '"+o+"' was not passed a valid Facet or IFacet instance in demandItem.");r[o]=this.demandItemFacet(u,t,n[o])}return r};e.prototype.demandItemFacet=function(e,t,n){void 0===n&&(n={});if(this._scope.isDisposed)throw new Error(E);var r=this._addEntry(t);if(!r.itemData.isMeta){if(e instanceof m.e)return this._addControl(r,e);if(e instanceof v.e)return this._addComputedValue(r,t,e,n)}if(t){var i=this._addValue(r,e,n);if(e instanceof d.e){if(i){return this._evaluator.deserializeItemKey(e.serialize(i),e)}if(e.matches(t)){return this._evaluator.deserializeItemKey(t,e)}}return!i&&e instanceof d.e&&e.matches(t)?e.deserialize(t):i}};e.prototype.isItemFacetResolved=function(e,t){if(this._scope.isDisposed)throw new Error(E);if(!t)return!1;if(S[e.id])return!1;var n=this._addEntry(t);return e instanceof v.e?this._addComputedResolution(n,t,e):"resolved"===this._addResolution(n,e)};e.prototype.haveDependenciesChanged=function(){var e,t,n,r=this._previousDependencies;if(!r)return!0;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var s=r[i],o=this._getItemData(i),u=o.item;if(o.isMeta){var a=p.e.unpack(s),l=u&&p.e.unpack(u),c=!!a&&k(a,l,L);if(c)return(e={})[i]=((t={})[p.e.id]=c,t),e}else{var h=k(s,u,function(e,t,n){return n===f.t.id?k(e,t,H):L(e,t)});if(h)return(n={})[i]=h,n}}return!1};e.prototype.updateDemandResolutions=function(e){var t=e||this._previousDemandResolutions;if(t)for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n],s=t[i],o=this._addEntry(i),u=this._getItemData(i);if(u.keyFacetData)for(var a=0,l=Object.keys(s);a<l.length;a++){var c=l[a],h=u.item,p=h&&f.t.unpack(h);O(o,c,p&&p[c]?M("resolved"):u.keyFacetData.isOperationHandlerRegistered?"":"resolved")}}};e.prototype.dispose=function(){this._scope.isDisposed=!0};e.prototype.getDemands=function(){return T(this.getDemandResolutions())};e.prototype.getDemandResolutions=function(){var e=this._entries,t={};e.some(function(e,n){if(n&&e&&e.demands){var r={};e.demands.some(function(e,t){r[t]=e});t[n]=r}});var n=this._previousDemandResolutions;return n?!Object(l.t)(t,n,P)?t:n:t};e.prototype.getDependencies=function(){var e=this._entries,t={};e.some(function(e,n){if(n&&e&&e.dependencies){var r={};e.dependencies.some(function(e,t){r[t]=e});t[n]=r}});var n=this._previousDependencies;return n?!Object(l.t)(t,n,_)?t:n:t};e.prototype.evaluateSelector=function(e){return e(this)};e.prototype.compute=function(e){return this._evaluator.evaluateSelector(e)};e.prototype._addEntry=function(e){var t=this._entries,n=t.get(e||"");if(n)return n;var r=this._getItemData(e);n={itemData:r,computedResolutions:Object(y.e)(),computedValues:Object(y.e)(),controls:Object(y.e)(),keyFacetEntry:r.keyFacetData?this._addEntry(r.keyFacetData.keyFacetItemKey):void 0,demands:void 0,dependencies:void 0};t.set(e||"",n);return n};e.prototype._addComputedValue=function(e,t,n,r){var i=e.computedValues,s=n.id;if(i.has(s))return i.get(s);var o=this._addComputation(t,n),u=o.result,a=o.demandResolutions,f=o.dependencies;i.set(s,u);r.suppressGetItems||this._mergeDemandResolutions(a);this._mergeDependencies(f);return u};e.prototype._addComputedResolution=function(e,t,n){var r=e.computedResolutions,i=n.id;if(r.has(i))return r.get(i);var s=this._addComputation(t,n),o=s.demandResolutions,u=s.dependencies,a=!Object(w.t)(this,{items:T(o)});r.set(i,a);this._mergeDependencies(u);return a};e.prototype._addComputation=function(e,t){var n=this._evaluator.getComputedFacetSelector({computedItemFacet:t,itemKey:e,state:this._state});return this.compute({contextualControlHandlers:this._contextualControlHandlers,owner:this._owner,selector:n,state:this._state})};e.prototype._addControl=function(e,t){var n,r=e.controls,i=t.id;if(r.has(i))return r.get(i);var s=e.itemData.keyFacetData,o=s&&s.controlHandlers;n=o&&t.unpack(o);var u=t.unpack(this._contextualControlHandlers),a=t.compose(n,u);r.set(i,a);var f=e.keyFacetEntry;f&&A(f,p.e.id,t.pack(n));A(e,h.r.id,e.itemData.preferredKeyFacet);return a};e.prototype._addValue=function(e,t,n){var r=t.id,i=e.itemData.item,s=i&&i[r],o=n.suppressGetItems,u=void 0===o?t instanceof d.e:o;if(e.itemData.keyFacetData){x[r]||A(e,r,s);if(!S[r]&&!u){var a=i&&f.t.unpack(i);O(e,r,a&&a[r]?M("resolved"):e.itemData.keyFacetData.isOperationHandlerRegistered?"":"resolved")}e.keyFacetEntry&&A(e,h.r.id,e.itemData.preferredKeyFacet)}return s};e.prototype._addResolution=function(e,t){var n,r=e.itemData,i=r&&r.item,s=i&&f.t.unpack(i),o=t.id,u=s&&s[o];A(e,f.t.id,((n={})[o]=u,n));return u};e.prototype._mergeDemandResolutions=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++)for(var r=n[t],i=this._addEntry(r),s=e[r],o=0,u=Object.keys(s);o<u.length;o++){var a=u[o];O(i,a,s[a])}};e.prototype._mergeDependencies=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++)for(var r=n[t],i=this._addEntry(r),s=e[r],o=0,u=Object.keys(s);o<u.length;o++){var a=u[o];A(i,a,s[a])}};return e})();function k(e,t,n){var r;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n(e[i],t&&t[i],i);if(s)return(r={})[i]=s,r}return!1}function L(e,t){return!Object(g.e)(e,t)&&{previous:e,current:t}}function A(e,t,n){var r=e.dependencies||(e.dependencies=Object(y.e)());if(t===f.t.id||t===p.e.id){var i=r.get(t);i?Object(c.e)(i,n):r.set(t,n)}else r.set(t,n)}function O(e,t,n){var r=e.demands;(r||(e.demands=Object(y.e)())).set(t,n);return!r}function M(e){return"resolved"===e?"resolved":""}function _(e,t){return Object(l.t)(e,t,D)}function D(e,t,n){return n===f.t.id?Object(l.t)(e,t):Object(g.e)(e,t)}function P(e,t){return Object(l.t)(e,t)}function H(e,t){return M(e)!==M(t)}var B={};function j(){return B}var F=n(363),I=n(273),q=n(591),R=n(409),U=n(532);n.d(t,"e",function(){return X});var z=Object(b.e)(function(e){var t=e.result,n=e.dependencies,r=e.demandResolutions;return{result:t,dependencies:n,demands:T(r)}}),W=(function(){function e(e){this._dispatch=e;this._dispatchBlocker=e(Object(R.t)());this._selectorEvaluations=new WeakMap;this._suspenderEvaluations=new WeakMap;this._selectors=Object(y.e)();this._keys=Object(y.e)()}e.prototype.evaluateSelector=function(e){var t=e.selector,n=e.contextualControlHandlers,r=e.state,i=e.owner,o=e.suspender,u=this._getSelectorEvaluationState(t),a=o?this._getSuspenderEvaluationState(t,o):void 0,f=a?a.selector:void 0,c=t!==f&&{previous:f,current:t},h=u.contextualControlHandlers,p=Object(l.e)(h,n,{debug:!0}),d=u.previousEvaluation;if(p){u.previousEvaluation=void 0;u.contextualControlHandlers=n}else{var v=u.evaluationsPerState.get(r);if(v){a&&(a.previousEvaluation=v);return v}}var m,g=u.previousEvaluation,y=a&&a.previousEvaluation,b=g||a&&a.previousEvaluation,E=y&&y.demandResolutions,S=a&&a.unresolvedDemands,x=S,N=new C({contextualControlHandlers:n,dispatch:this._dispatch,owner:i,previousDemandResolutions:g&&g.demandResolutions,previousDependencies:g&&g.dependencies,state:r,evaluator:this,dispatchBlocker:this._dispatchBlocker,why:function(){var e={};if(m&&!0!==m)e.hasDependencyChanged=m;else if(c){e.hasSelectorChanged=c;var n=c.previous,r=c.current;if(n&&r){var i=n.props,s=r.props;if(i&&s){var o=Object(l.e)(i,s,{debug:!0});o&&(e.hasPropChanged=o)}}}else if(b&&!d)e.resumedFromSuspense={previousUnresolvedDemands:x};else if(d)p?e.hasContextualControlHandlerChanged=p:e.other={reason:"Could not determine why this selector is bveing evaluated. This is a bug."};else{var u=t.props;e.isSelectorNew={selector:t,props:u}}return e}});try{if(!g||(m=N.haveDependenciesChanged())){var k=o?this.evaluateSuspense(N):{},L=k.mode,A=void 0===L?"none":L,O=k.getItems,M=void 0===O?void 0:O;if(b&&("debounce"===A||"freeze"===A)&&("debounce"!==A||E&&(S=Object(w.t)(N,{items:T(E)})))){N.updateDemandResolutions(E);(P=N.getDemandResolutions())!==E&&(b=Object(s.__assign)(Object(s.__assign)({},b),{demandResolutions:P}))}else{S=void 0;var _=N.evaluate(t).result;b={result:_,dependencies:N.getDependencies(),demandResolutions:N.getDemandResolutions()};u.previousEvaluation=b;u.evaluationsPerState.set(r,b);if("wait"===A){var D={items:T(b.demandResolutions)};if(M&&Object(w.t)(N,D))throw M(D)}}}else{N.updateDemandResolutions();var P=N.getDemandResolutions();b=P!==(g&&g.demandResolutions)?Object(s.__assign)(Object(s.__assign)({},g),{demandResolutions:P}):g;u.evaluationsPerState.set(r,b)}}finally{N.dispose();if(a){a.previousEvaluation=b;a.selector=S&&f||t;a.unresolvedDemands=S}}return b};e.prototype.evaluate=function(e){return z(this.evaluateSelector({contextualControlHandlers:e.controlHandlers,owner:e.owner,selector:e.selector,state:e.state,suspender:e.suspender}))};e.prototype.evaluateSuspense=function(e){var t=e.demandItemFacet(F.e,void 0);return F.e.evaluate(t)(e,{})};e.prototype.getComputedFacetSelector=function(e){var t=e.computedItemFacet,n=e.itemKey,r=this._selectors,i=r.get(n||"")||(function(){var e=Object(y.e)();r.set(n||"",e);return e})(),s=t.id;return i.get(s)||(function(){var e=Object(q.e)(t.compute,{itemKey:n});i.set(s,e);return e})()};e.prototype.deserializeItemKey=function(e,t){var n=this._keys.get(e);if(n)return n;n=t.deserialize(e);this._keys.set(e,n);return n};e.prototype.pruneComputedFacets=function(e){for(var t=Object(y.e)(),n=Object(y.e)(),r=0,i=Object.keys(e.items);r<i.length;r++){var s=i[r],o=this._keys.get(s);o&&n.set(s,o);var u=this._selectors.get(s);u&&t.set(s,u)}this._selectors=t;this._keys=n};e.prototype.pruneSelectorEvaluations=function(e){this.pruneComputedFacets({items:{}});this._selectorEvaluations=new WeakMap;this._suspenderEvaluations=new WeakMap};e.prototype._getSelectorEvaluationState=function(e){var t=this._selectorEvaluations,n=t.get(e);if(!n){n={evaluationsPerState:new WeakMap};t.set(e,n)}return n};e.prototype._getSuspenderEvaluationState=function(e,t){var n=this._suspenderEvaluations,r=n.get(t);if(!r){r={selector:e};n.set(t,r)}return r};return e})(),X=Object(I.e)(function(e){if(U.e)throw new Error("Called legacy ItemCacheEvaluator from LeanItemScope. Use the new ItemCacheEvaluator instead.");return new W(e)})},"406":function(e,t,n){"use strict";n.d(t,"e",function(){return o});var r=n(0),i=n(113),s=n(184);var o=(function(e){Object(r.__extends)(t,e);function t(t,n){var r=e.call(this)||this;r._demands=t;r._updateCompleteSignals=n;return r}t.prototype.apply=function(e){if(e){var t=(function(e,t){for(var n=void 0,i=[],o=0,u=e.length;o<u;o++){var a=e[0],f=a.completeSignal,l=a.options.demands,c=void 0,h=Object(s.n)(l,t);h!==l&&(c=Object(r.__assign)(Object(r.__assign)({},a),{options:Object(r.__assign)(Object(r.__assign)({},a.options),{demands:h})}));if(c){n||(n=e.slice(0,o));Object.keys(c.options.demands).length>0?n.push(c):i.push(f)}else n&&n.push(a)}return{newQueue:n||e,workToComplete:i}})(e,this._demands),n=t.newQueue,i=t.workToComplete;this._updateCompleteSignals(i);return n}};return t})(i.t)},"407":function(e,t,n){"use strict";n.d(t,"e",function(){return s});var r=n(0),i=n(50),s=(function(e){Object(r.__extends)(t,e);function t(t){var n=e.call(this,t,{id:Object(i.i)()})||this;n._lastId=0;return n}t.prototype.next=function(){return{id:++this._lastId}};t.prototype.serializeNext=function(){return this.serialize(this.next())};return t})(i.e)},"408":function(e,t,n){"use strict";n.d(t,"e",function(){return s});n.d(t,"t",function(){return o});var r=n(273),i=n(195),s=(function(){function e(e,t){var n=this;this._notify=function(){var e=n._nextStoreUpdateSignal;n._nextStoreUpdateSignal=new i.e;e.resolve();n._notifyObservers()};this._queuedChangedObservables=[];this._storeNotifier=e;this._nextStoreUpdateSignal=new i.e;this._independentlyChangedObservables=void 0;this._logger=t;this._queuedPublishers=this._logger&&this._logger.loggingEnabled?[]:void 0}e.prototype.queueChangedObservable=function(e){if(void 0===this._independentlyChangedObservables){this._independentlyChangedObservables=new Set;this._queuedChangedObservables.push(this._independentlyChangedObservables);this._queuedPublishers&&this._queuedPublishers.push(void 0);this._queueNotify()}this._independentlyChangedObservables.add(e)};e.prototype.queueChangedObservables=function(e,t){if(e.size>0){this._queuedChangedObservables.push(e);this._queuedPublishers&&this._queuedPublishers.push(t);this._queueNotify()}};e.prototype.waitForNextStoreUpdate=function(){this._queueNotify();return this._nextStoreUpdateSignal.promise};e.prototype.forceNotify=function(){this._queueNotify({urgent:!0})};e.prototype._queueNotify=function(e){this._storeNotifier(this._notify,e)};e.prototype._notifyObservers=function(){var e=this._queuedChangedObservables;if(e.length>0){this._queuedChangedObservables=[];this._independentlyChangedObservables=void 0;this._queuedPublishers&&this._logger&&this._logger.logStoreUpdate(e,this._queuedPublishers);this._queuedPublishers=this._logger&&this._logger.loggingEnabled?[]:void 0;for(var t=0,n=e;t<n.length;t++){n[t].forEach(function(e){e.notifyObservers()})}}};return e})(),o=Object(r.e)(function(e){throw"StoreUpdateBatcher initialization should be handled by ItemCacheStore itself"})},"409":function(e,t,n){"use strict";n.d(t,"t",function(){return o});n.d(t,"e",function(){return u});var r=n(171),i=n(275),s=Object(r.e)("getDispatchBlocker");function o(){return s({})}function u(e){void 0===e&&(e={});var t=e.onDispatchInSelector,n=void 0===t?i.t:t;return function(e){e.dispatch;var t=[];return function(e){return function(r){var i=t[t.length-1];if("function"==typeof r){i&&n(i());return e(r)}if(s.matches(r))return function(e){t.push(e);return function(){t.pop()}};i&&n(i());return e(r)}}}}},"533":function(e,t,n){"use strict";var r=n(532),i=n(389),s=n(243);var o=n(588);n.d(t,"e",function(){return u});var u=r.e?o.e:function(e,t){void 0===t&&(t={});var n=t.contextualControlHandlers,r=void 0===n?s.t:n;return function(t,n){return t(i.e).evaluate({selector:e,controlHandlers:r,state:n(),owner:{}}).result}}},"588":function(e,t,n){"use strict";n.d(t,"e",function(){return i});var r=n(272);function i(e,t){void 0===t&&(t={});var n=t.contextualControlHandlerCache;return function(t){return t(r.t).read({selector:e,contextualControlHandlerCache:n})}}},"591":function(e,t,n){"use strict";n.d(t,"e",function(){return i});var r=n(109);function i(e,t){function n(n){return e(n,t)}Object(r.e)(n,{selector:e,props:t});return n}}}]);define("plt.items-view",[],{});